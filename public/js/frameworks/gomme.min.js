var Gomme=function(t){"use strict";var e={model:function r(t,o){var s=Function("return function "+t.replace(/[^a-z|A-Z_]/g,"")+"(a, b, c, d, e, f, g, h, i, j, k){				Gomme.Classes.base.call(this, a, b, c, d, e, f, g, h, i, j, k);			}")(),n=s.prototype;return Object.defineProperty(n,"$",{enumerable:!1,configurable:!0,writable:!0,value:{original:o,subclasses:{}}}),Object.keys(o).forEach(function(s){var i=o[s];if("object"==typeof i){if(i.constructor===Array)return void(n.$.subclasses[s]=[]);var a=t+"_"+s;n.$.subclasses[s]=r(a,i)}else e.Tools.add(n,s)}),s},Maps:{arrayMethod:function(){var t={from:!1,isArray:!1,observe:!1,of:!1,concat:!1,copyWithin:!1,entries:!1,every:!1,fill:!1,filter:!1,find:!1,findIndex:!1,forEach:!1,includes:!1,indexOf:!1,join:!1,keys:!1,lastIndexOf:!1,map:!1,pop:!1,push:!1,reduce:!1,reduceRight:!1,reverse:!1,shift:!1,slice:!1,some:!1,sort:!1,splice:!1,toLocaleString:!1,toSource:!1,toString:!1,unshift:!1,values:!1,unobserve:!1};return Object.keys(t).forEach(function(e){t[e]=function(t,r){var o=Array.prototype.slice.call(arguments);o.shift(),o.shift();var s=r.apply(this,o),n={arguments:o,result:s};return this.$&&this.$.trigger&&(this.$.trigger(e,n),this.$.trigger("*",n),this.$.parent&&this.$.parent.$.trigger("*",n)),s}}),t}()},Tools:{uid:function(){var t="",e=0,r=Number.MAX_SAFE_INTEGER-5;return function(){return e>r&&(t+=e,e=0),t+e++}}(),add:function(t,e){Object.defineProperty(t,e,{get:function(){if(this.$.hasOwnProperty("store")&&this.$.store.hasOwnProperty(e))return this.$.store[e];var t=Object.getPrototypeOf(this);return t.$.original[e]},set:function(t){if(this.$){var r=void 0;if(this.$.store&&this.$.store.hasOwnProperty(e))r=this.$.store[e];else{var o=Object.getPrototypeOf(this);r=o.$.original[e]}if(this.$.store[e]=t,r!==t){var s={owner:this,property:e,old:r,"new":t};this.$&&this.$.trigger&&(this.$.trigger(e,s),this.$.trigger("*",s),this.$.parent&&this.$.parent.$.trigger("*",s)),s=null,r=null}}}})},Events:{remove:function(){delete this.pool[this.id]},removeAll:function(){var t=this;Object.keys(this.pool).forEach(function(e){delete t.pool[e]})}}},Classes:{base:function(t,r,o,s,n,i,a,c,u,f,l){var h=this;Object.defineProperty(this,"$",{enumerable:!1,configurable:!0,writable:!0,value:new e.Classes.$(this)});var p=Object.getPrototypeOf(this);p&&p.$&&(Object.keys(p.$.subclasses).forEach(function(v){var d=p.$.subclasses[v];d.constructor===Array?h[v]=e.Extenders.array([]):h[v]=new d(t,r,o,s,n,i,a,c,u,f,l),h[v].$.parent=h.$.parent||h}),"function"==typeof this.$.constructor&&this.$.constructor(t,r,o,s,n,i,a,c,u,f,l))},$:function(){function t(t){t&&(this.id=e.Tools.uid(),this.host=t,this.store={},this.events={})}var r=t.prototype;return r.dispose=function(t){var e=this;t=t||!1;var r=Object.getPrototypeOf(this.host),o=r.$.subclasses,s=Object.keys(o);s.forEach(function(r){var o=e.host[r];o.$&&"function"==typeof o.$.dispose&&o.$.dispose(!!t)}),delete this.id,delete this.store,delete this.events,delete this.parent;var n=Object.keys(this.host),i=0,a=n.length,c=function(){i=null,a=null,n=null,o=null,s=null,c=null,delete e.host.$,e=null};return t?void n.forEach(function(r){setTimeout(function(){delete e.host[r],i++,i===a&&"function"==typeof t&&(c(),t())},0)}):(n.forEach(function(t){delete e.host[t]}),void c())},r.on=function(t,r){if(t&&"function"==typeof r){if(this.events[t]=this.events[t]||{},"object"==typeof t&&t.constructor===Array){var o=this,s=[];return t.forEach(function(t){s.push(o.on(t,r))}),setTimeout(function(){o=null,s=null},0),s}if("string"==typeof t){var n=e.Tools.uid();this.events[t][n]=r;var i={id:n,pool:this.events[t],remove:e.Tools.Events.remove,removeAll:e.Tools.Events.removeAll};return i}}return!1},r.trigger=function(t,e){var r=this.events[t];"object"==typeof r&&Object.keys(r).forEach(function(t){var o=r[t];"function"==typeof o&&o(e)})},t}()},Extenders:{array:function(t){return t&&"object"==typeof t&&t.constructor===Array||(t=[]),t.$?t:(Object.defineProperty(t,"$",{enumerable:!1,configurable:!0,writable:!0,value:new e.Classes.$(t)}),Object.keys(e.Maps.arrayMethod).forEach(function(r){if("function"==typeof t[r]){var o=t[r];t[r]=e.Maps.arrayMethod[r].bind(t,t,o)}}),t)}}};return e}(window);